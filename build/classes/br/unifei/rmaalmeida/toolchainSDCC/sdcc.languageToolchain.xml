<?xml version="1.0" encoding="UTF-8"?>
<!--
    SDCC Toolchain allows MPLABX to compile with SDCC+GPUtils for pic 16/18
    Copyright (C) 2011  Rodrigo Maximiano Antunes de Almeida

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<mp:languageToolchain xmlns:mp="http://crownking/mplab"
                      xmlns:opt="http://crownking/opt"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                      xsi:schemaLocation="http://crownking/mplab mplab/languageToolchain.xsd"
                      mp:id="SDCCToolchain"
                      mp:name="SDCC Toolchain"
                      mp:hostplatforms="windows,linux,mac,none"
                      mp:class="br.unifei.rmaalmeida.toolchainSDCC.SDCCtoolchain">

  <mp:versionProvider mp:class="br.unifei.rmaalmeida.toolchainSDCC.SDCCVersionProvider"/>
  <opt:versionFactory opt:class="br.unifei.rmaalmeida.toolchainSDCC.SDCCVersionFactory"/>
  
  <mp:configurationObject mp:id="sdcc" opt:src="sdcc.optionLanguage.xml" mp:idref="sdcc"/>

  <mp:customizerNode mp:idref="SDCCToolchain" mp:name="SDCC Toolchain">
    <mp:customizerNode mp:idref="sdcc" mp:name="sdcc"/>
  </mp:customizerNode>

  <mp:makefileWriter>
      <mp:inputToOutputExtensionMap mp:src="c" mp:dst="o"/>
      <mp:inputToOutputExtensionMap mp:src="C" mp:dst="o"/>
      <mp:build mp:buildtype="standalone" mp:outputextension="cof">
          <mp:buildStep mp:idref="compile"/>
          <mp:buildStep mp:idref="link"/>
      </mp:build>
      <mp:makeRule mp:id="compile" mp:prerequisites=".*[cC]$" mp:runtimepropertiesclass="br.unifei.rmaalmeida.toolchainSDCC.CompilerProperties">
	  <!-- this following line makes sure the directory where we will compile exists -->
            <mp:textEmitter mp:text="${MKDIR} ${CURRENT_OBJECT_DIR} ${NEWLINE}"/>
	  <!-- this following line erases the dependency files created in the last compiler -->
            <mp:textEmitter mp:text="${RM} ${CURRENT_OBJECT_FILE} ${NEWLINE}"/>
	  <!-- this is the beginning of the compiler line -->
            <mp:textEmitter mp:text="${MP_CC} "/>
            <mp:textEmitter mp:text="--debug-ralloc "/>
            <mp:optionEmitter mp:idref="sdcc" mp:separator=" "/>
            <mp:textEmitter mp:text=" -c"/>
            <mp:textEmitter mp:text=" -m${PROCESSOR_FAMILY}"/>
            <mp:textEmitter mp:text=" -p${PROCESSOR_NAME}"/>
            <mp:textEmitter mp:text=" ${CURRENT_SOURCE_FILE} "/>
            <mp:textEmitter mp:text=" -o${CURRENT_OBJECT_FILE}"/>
            <mp:textEmitter mp:text="${NEWLINE}"/>
      </mp:makeRule>

      <mp:makeRule mp:id="link" mp:target="${FINAL_IMAGE_NAME}" mp:prerequisites="${CURRENT_OBJECT_FILES}" mp:runtimepropertiesclass="br.unifei.rmaalmeida.toolchainSDCC.CompilerProperties">
            <mp:textEmitter mp:text="${MKDIR} ${FINAL_TARGET_DIR} ${NEWLINE}"/>
            <mp:textEmitter mp:text="${MP_CC} "/>
            <mp:textEmitter mp:text=" --debug-ralloc -Wl-c -Wl-m "/>
            <mp:optionEmitter mp:idref="sdcc" mp:separator=" "/>
            <mp:textEmitter mp:text=" -m${PROCESSOR_FAMILY}"/>
            <mp:textEmitter mp:text=" -p${PROCESSOR_NAME}"/>
            <mp:textEmitter mp:text=" ${CURRENT_OBJECT_FILES} " mp:separator=" "/>
            <mp:textEmitter mp:text=" -o${FINAL_IMAGE_NAME} "/>
      </mp:makeRule>
  </mp:makefileWriter>


  <mp:logicalFolder mp:id="SourceFiles"/>
  <mp:logicalFolder mp:id="HeaderFiles"/>
  <mp:logicalFolder mp:id="ObjectFiles"/>
  <mp:logicalFolder mp:id="LibraryFiles"/>
  <mp:logicalFolder mp:id="LinkerScript"/>

  <mp:defaultLocation mp:hostplatform="windows" mp:dir="C:/*/SDCC/bin/"/>
  <mp:defaultLocation mp:hostplatform="linux" mp:dir="/usr/local/bin"/>
  <mp:defaultLocation mp:hostplatform="mac" mp:dir="/*SDCC/bin"/>


  <mp:cCompiler mp:file="sdcc" mp:name="SDCC Compiler for 8-bit Devices"/>
  
  <mp:deviceSupport>
      <mp:family mp:family="16x">
            <mp:device mp:name="PIC16C432" mp:support="beta"/>
            <mp:device mp:name="PIC16C433" mp:support="beta"/>
            <mp:device mp:name="PIC16C554" mp:support="beta"/>
            <mp:device mp:name="PIC16C557" mp:support="beta"/>
            <mp:device mp:name="PIC16C558" mp:support="beta"/>
            <mp:device mp:name="PIC16C62" mp:support="beta"/>
            <mp:device mp:name="PIC16C620" mp:support="beta"/>
            <mp:device mp:name="PIC16C620a" mp:support="beta"/>
            <mp:device mp:name="PIC16C621" mp:support="beta"/>
            <mp:device mp:name="PIC16C621a" mp:support="beta"/>
            <mp:device mp:name="PIC16C622" mp:support="beta"/>
            <mp:device mp:name="PIC16C622a" mp:support="beta"/>
            <mp:device mp:name="PIC16C63a" mp:support="beta"/>
            <mp:device mp:name="PIC16C65b" mp:support="beta"/>
            <mp:device mp:name="PIC16C71" mp:support="beta"/>
            <mp:device mp:name="PIC16C710" mp:support="beta"/>
            <mp:device mp:name="PIC16C711" mp:support="beta"/>
            <mp:device mp:name="PIC16C715" mp:support="beta"/>
            <mp:device mp:name="PIC16C717" mp:support="beta"/>
            <mp:device mp:name="PIC16C72" mp:support="beta"/>
            <mp:device mp:name="PIC16C73b" mp:support="beta"/>
            <mp:device mp:name="PIC16C745" mp:support="beta"/>
            <mp:device mp:name="PIC16C74b" mp:support="beta"/>
            <mp:device mp:name="PIC16C765" mp:support="beta"/>
            <mp:device mp:name="PIC16C770" mp:support="beta"/>
            <mp:device mp:name="PIC16C771" mp:support="beta"/>
            <mp:device mp:name="PIC16C773" mp:support="beta"/>
            <mp:device mp:name="PIC16C774" mp:support="beta"/>
            <mp:device mp:name="PIC16C781" mp:support="beta"/>
            <mp:device mp:name="PIC16C782" mp:support="beta"/>
            <mp:device mp:name="PIC16C925" mp:support="beta"/>
            <mp:device mp:name="PIC16C926" mp:support="beta"/>

            <mp:device mp:name="PIC16CR620a" mp:support="beta"/>
            <mp:device mp:name="PIC16CR73" mp:support="beta"/>
            <mp:device mp:name="PIC16CR74" mp:support="beta"/>
            <mp:device mp:name="PIC16CR76" mp:support="beta"/>
            <mp:device mp:name="PIC16CR77" mp:support="beta"/>

            <mp:device mp:name="PIC16F616" mp:support="beta"/>
            <mp:device mp:name="PIC16F627" mp:support="beta"/>
            <mp:device mp:name="PIC16F627a" mp:support="beta"/>
            <mp:device mp:name="PIC16F628" mp:support="beta"/>
            <mp:device mp:name="PIC16F628a" mp:support="beta"/>
            <mp:device mp:name="PIC16F630" mp:support="beta"/>
            <mp:device mp:name="PIC16F636" mp:support="beta"/>
            <mp:device mp:name="PIC16F639" mp:support="beta"/>
            <mp:device mp:name="PIC16F648" mp:support="beta"/>
            <mp:device mp:name="PIC16F648a" mp:support="beta"/>
            <mp:device mp:name="PIC16F676" mp:support="beta"/>
            <mp:device mp:name="PIC16F684" mp:support="beta"/>
            <mp:device mp:name="PIC16F685" mp:support="beta"/>
            <mp:device mp:name="PIC16F687" mp:support="beta"/>
            <mp:device mp:name="PIC16F688" mp:support="beta"/>
            <mp:device mp:name="PIC16F689" mp:support="beta"/>
            <mp:device mp:name="PIC16F690" mp:support="beta"/>
            <mp:device mp:name="PIC16F716" mp:support="beta"/>
            <mp:device mp:name="PIC16F72" mp:support="beta"/>
            <mp:device mp:name="PIC16F73" mp:support="beta"/>
            <mp:device mp:name="PIC16F737" mp:support="beta"/>
            <mp:device mp:name="PIC16F74" mp:support="beta"/>
            <mp:device mp:name="PIC16F747" mp:support="beta"/>
            <mp:device mp:name="PIC16F76" mp:support="beta"/>
            <mp:device mp:name="PIC16F767" mp:support="beta"/>
            <mp:device mp:name="PIC16F77" mp:support="beta"/>
            <mp:device mp:name="PIC16F777" mp:support="beta"/>
            <mp:device mp:name="PIC16F785" mp:support="beta"/>
            <mp:device mp:name="PIC16F818" mp:support="beta"/>
            <mp:device mp:name="PIC16F819" mp:support="beta"/>
            <mp:device mp:name="PIC16F84" mp:support="beta"/>
            <mp:device mp:name="PIC16F84a" mp:support="beta"/>
            <mp:device mp:name="PIC16F87" mp:support="beta"/>
            <mp:device mp:name="PIC16F870" mp:support="beta"/>
            <mp:device mp:name="PIC16F871" mp:support="beta"/>
            <mp:device mp:name="PIC16F872" mp:support="beta"/>
            <mp:device mp:name="PIC16F873" mp:support="beta"/>
            <mp:device mp:name="PIC16F873a" mp:support="beta"/>
            <mp:device mp:name="PIC16F874" mp:support="beta"/>
            <mp:device mp:name="PIC16F874a" mp:support="beta"/>
            <mp:device mp:name="PIC16F876" mp:support="beta"/>
            <mp:device mp:name="PIC16F876a" mp:support="beta"/>
            <mp:device mp:name="PIC16F877" mp:support="beta"/>
            <mp:device mp:name="PIC16F877a" mp:support="beta"/>
            <mp:device mp:name="PIC16F88" mp:support="beta"/>
            <mp:device mp:name="PIC16F886" mp:support="beta"/>
            <mp:device mp:name="PIC16F887" mp:support="beta"/>
            <mp:device mp:name="PIC16F913" mp:support="beta"/>
            <mp:device mp:name="PIC16F914" mp:support="beta"/>
            <mp:device mp:name="PIC16F916" mp:support="beta"/>
            <mp:device mp:name="PIC16F917" mp:support="beta"/>
            <mp:device mp:name="PIC16F946" mp:support="beta"/>
      </mp:family>

      <mp:family mp:family="18x">
            <mp:device mp:name="PIC18F242" mp:support="beta"/>
            <mp:device mp:name="PIC18F248" mp:support="beta"/>
            <mp:device mp:name="PIC18F252" mp:support="beta"/>
            <mp:device mp:name="PIC18F258" mp:support="beta"/>
            <mp:device mp:name="PIC18F442" mp:support="beta"/>
            <mp:device mp:name="PIC18F448" mp:support="beta"/>
            <mp:device mp:name="PIC18F452" mp:support="beta"/>
            <mp:device mp:name="PIC18F458" mp:support="beta"/>
            <mp:device mp:name="PIC18F1220" mp:support="beta"/>
            <mp:device mp:name="PIC18F1320" mp:support="beta"/>
            <mp:device mp:name="PIC18F13k50" mp:support="beta"/>
            <mp:device mp:name="PIC18F14k50" mp:support="beta"/>
            <mp:device mp:name="PIC18F2220" mp:support="beta"/>
            <mp:device mp:name="PIC18F2221" mp:support="beta"/>
            <mp:device mp:name="PIC18F2320" mp:support="beta"/>
            <mp:device mp:name="PIC18F2321" mp:support="beta"/>
            <mp:device mp:name="PIC18F2331" mp:support="beta"/>
            <mp:device mp:name="PIC18F23k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F2410" mp:support="beta"/>
            <mp:device mp:name="PIC18F2420" mp:support="beta"/>
            <mp:device mp:name="PIC18F2423" mp:support="beta"/>
            <mp:device mp:name="PIC18F2431" mp:support="beta"/>
            <mp:device mp:name="PIC18F2450" mp:support="beta"/>
            <mp:device mp:name="PIC18F2455" mp:support="beta"/>
            <mp:device mp:name="PIC18F2480" mp:support="beta"/>
            <mp:device mp:name="PIC18F24j10" mp:support="beta"/>
            <mp:device mp:name="PIC18F24j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F24k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F2510" mp:support="beta"/>
            <mp:device mp:name="PIC18F2515" mp:support="beta"/>
            <mp:device mp:name="PIC18F2520" mp:support="beta"/>
            <mp:device mp:name="PIC18F2523" mp:support="beta"/>
            <mp:device mp:name="PIC18F2525" mp:support="beta"/>
            <mp:device mp:name="PIC18F2550" mp:support="beta"/>
            <mp:device mp:name="PIC18F2580" mp:support="beta"/>
            <mp:device mp:name="PIC18F2585" mp:support="beta"/>
            <mp:device mp:name="PIC18F25j10" mp:support="beta"/>
            <mp:device mp:name="PIC18F25j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F25k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F2610" mp:support="beta"/>
            <mp:device mp:name="PIC18F2620" mp:support="beta"/>
            <mp:device mp:name="PIC18F2680" mp:support="beta"/>
            <mp:device mp:name="PIC18F2682" mp:support="beta"/>
            <mp:device mp:name="PIC18F2685" mp:support="beta"/>
            <mp:device mp:name="PIC18F26j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F26k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F4220" mp:support="beta"/>
            <mp:device mp:name="PIC18F4221" mp:support="beta"/>
            <mp:device mp:name="PIC18F4320" mp:support="beta"/>
            <mp:device mp:name="PIC18F4321" mp:support="beta"/>
            <mp:device mp:name="PIC18F4331" mp:support="beta"/>
            <mp:device mp:name="PIC18F43k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F4410" mp:support="beta"/>
            <mp:device mp:name="PIC18F4420" mp:support="beta"/>
            <mp:device mp:name="PIC18F4423" mp:support="beta"/>
            <mp:device mp:name="PIC18F4431" mp:support="beta"/>
            <mp:device mp:name="PIC18F4450" mp:support="beta"/>
            <mp:device mp:name="PIC18F4455" mp:support="beta"/>
            <mp:device mp:name="PIC18F4480" mp:support="beta"/>
            <mp:device mp:name="PIC18F44j10" mp:support="beta"/>
            <mp:device mp:name="PIC18F44j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F44k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F4510" mp:support="beta"/>
            <mp:device mp:name="PIC18F4515" mp:support="beta"/>
            <mp:device mp:name="PIC18F4520" mp:support="beta"/>
            <mp:device mp:name="PIC18F4523" mp:support="beta"/>
            <mp:device mp:name="PIC18F4525" mp:support="beta"/>
            <mp:device mp:name="PIC18F4550" mp:support="beta"/>
            <mp:device mp:name="PIC18F4580" mp:support="beta"/>
            <mp:device mp:name="PIC18F4585" mp:support="beta"/>
            <mp:device mp:name="PIC18F45j10" mp:support="beta"/>
            <mp:device mp:name="PIC18F45j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F45k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F4610" mp:support="beta"/>
            <mp:device mp:name="PIC18F4620" mp:support="beta"/>
            <mp:device mp:name="PIC18F4680" mp:support="beta"/>
            <mp:device mp:name="PIC18F4682" mp:support="beta"/>
            <mp:device mp:name="PIC18F4685" mp:support="beta"/>
            <mp:device mp:name="PIC18F46j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F46k20" mp:support="beta"/>
            <mp:device mp:name="PIC18F6520" mp:support="beta"/>
            <mp:device mp:name="PIC18F6527" mp:support="beta"/>
            <mp:device mp:name="PIC18F6585" mp:support="beta"/>
            <mp:device mp:name="PIC18F65j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F6620" mp:support="beta"/>
            <mp:device mp:name="PIC18F6622" mp:support="beta"/>
            <mp:device mp:name="PIC18F6627" mp:support="beta"/>
            <mp:device mp:name="PIC18F6680" mp:support="beta"/>
            <mp:device mp:name="PIC18F66j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F66j55" mp:support="beta"/>
            <mp:device mp:name="PIC18F66j60" mp:support="beta"/>
            <mp:device mp:name="PIC18F66j65" mp:support="beta"/>
            <mp:device mp:name="PIC18F6720" mp:support="beta"/>
            <mp:device mp:name="PIC18F6722" mp:support="beta"/>
            <mp:device mp:name="PIC18F67j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F67j60" mp:support="beta"/>
            <mp:device mp:name="PIC18F8520" mp:support="beta"/>
            <mp:device mp:name="PIC18F8527" mp:support="beta"/>
            <mp:device mp:name="PIC18F8585" mp:support="beta"/>
            <mp:device mp:name="PIC18F85j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F8620" mp:support="beta"/>
            <mp:device mp:name="PIC18F8622" mp:support="beta"/>
            <mp:device mp:name="PIC18F8627" mp:support="beta"/>
            <mp:device mp:name="PIC18F8680" mp:support="beta"/>
            <mp:device mp:name="PIC18F86j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F86j55" mp:support="beta"/>
            <mp:device mp:name="PIC18F86j60" mp:support="beta"/>
            <mp:device mp:name="PIC18F86j65" mp:support="beta"/>
            <mp:device mp:name="PIC18F8720" mp:support="beta"/>
            <mp:device mp:name="PIC18F8722" mp:support="beta"/>
            <mp:device mp:name="PIC18F87j50" mp:support="beta"/>
            <mp:device mp:name="PIC18F87j60" mp:support="beta"/>
            <mp:device mp:name="PIC18F96j60" mp:support="beta"/>
            <mp:device mp:name="PIC18F96j65" mp:support="beta"/>
            <mp:device mp:name="PIC18F97j60" mp:support="beta"/>
      </mp:family>
  </mp:deviceSupport>
</mp:languageToolchain>